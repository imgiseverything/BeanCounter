/*! beancounterapp 25-09-2014 */
function beforeAjaxFormSubmit(){var a=$(".content-primary form");a.height(a.height()),a.find("div.field").hide(),a.find('button[type="submit"]').html("Submitting please wait&hellip;")}function ajaxFormSuccess(){$(".content-primary form").ajaxForm(ajaxFormOptions),"function"==typeof beancounterColorbox&&beancounterColorbox(),"function"==typeof hideTime&&hideTime(),"function"==typeof showHideExtras&&showHideExtras(),"function"==typeof generateInvoiceNumber&&generateInvoiceNumber(),"function"==typeof initDatePicker&&initDatePicker(),"function"==typeof initUsableForms&&initUsableForms(),"function"==typeof addNewThenRefresh&&addNewThenRefresh()}function ajaxClientVcard(){0!==$("#client").length&&0!==$("#for_the_attention_of").length&&$("#client").change(function(){data={id:$("#client").val()},$.ajax({url:"/ajax/client_vcard.php",data:data,success:function(a){$("#for_the_attention_of").val(a)}})})}function beancounterSettings(){var a=$("#start_of_financial_year"),b=$("#start_of_financial_year_day"),c=$("#start_of_financial_year_month");0!==a.length&&$("#start_of_financial_year_day, #start_of_financial_year_month").change(function(){a.val(b.val()+c.val())})}function calculateVAT(a,b){var c,d,e=0;return b>0&&(d=(100+parseFloat(b))/100,c=a/d,e=a-c,e=Math.round(100*e)/100),e}function closePopup(){$(document).on("click","a.close-popup",function(a){a.preventDefault(),parent.$.fn.colorbox.close()})}function expensesVAT(){(0!==$("#outgoing_supplier").length||0!==$("#vat").length)&&(0===$("#vat").val().length&&$("#vat").parent().hide().before('<div class="field"><a href="#" id="AddExpensesVAT" class="button inline-button">Log VAT?</a></div>'),$("#AddExpensesVAT").click(function(a){a.preventDefault(),$("#AddExpensesVAT").remove(),$("#vat").parent().slideDown(),$("#vat_rate").parent().slideDown(),$("#price").blur()}),$("#price").blur(function(){$("#vat").parent().is(":visible")!==!0&&$("#vat").val(calculateVAT($("#price").val(),$("#vat_rate").val()))}))}function projectsVAT(){var a=$("#vat_rate"),b=$("#hidden_vat_rate");0!==a.length&&0!==b.length&&0!==b.val().length&&$("#charge_vat").click(function(c){c.preventDefualt(),a.val($(this).is(":checked")?b.val():"0")})}function formIframeCheck(){var a=window.location!=window.parent.location?!0:!1,b=$("#popupfield");0!==b.length&&a===!0&&b.val("true")}function popularClients(){var a,b="/ajax/popular_clients_dropdown.php",c=$("#client");0!==c.length&&(a=c.html(),$.ajax({url:b,data:"",success:function(b){c.html(b+a)}}))}function refreshChoices(a){var b,c;return $("#add_new_"+a+"_link",parent.document.body).hide(),b=$("#refresh_"+a+"_link",parent.document.body),$(b).css("display","inline-block").click(),c=$(b).attr("href"),$("#"+a,parent.document.body).load(c),$(b).hide(),parent.$.fn.colorbox.close(),!1}function styliseCalendar(){{var a,b,c=new Array("#C33","#6A0","#36C","#E80","#D47","#949","#7083E8","#63C"),d=new Array,e=0;new Array("single","multiple")}if(0!==$(".calendar").length){$(".calendar").each(function(){a=$(this).find(".bookings").find("li")}),$(a).each(function(){b=$(this).attr("class").split(" ");var a;for(a in b)"odd"!=b[a]&&"even"!=b[a]&&"first"!=b[a]&&"even"!=b[a]&&"single"!=b[a]&&"multiple"!=b[a]&&(d[e]=b[a],e++)});for(var f=[],e=d.length;e--;){var g=d[e];-1===$.inArray(g,f)&&f.unshift(g)}e=0;var h;for(h in f)$("ul.bookings li."+f[h]+" a").css("background-color",c[e]).css("color","#FFF"),e++,e>=c.length&&(e=0)}}function timingClients(){var a="/ajax/project_client_dropdown.php",b=$("#client"),c=$("#project");0!==b.length&&0!==c.length&&0!==$("body.timings").length&&b.change(function(){$.ajax({url:a,data:"client="+b.val()+"&project="+c.val(),success:function(a){c.html(a)}})})}function toggleProjectDetails(){var a="Show details",b="Hide details",c=' <a href="#" id="ToggleProjectDetails" class="button inline-button"> '+a+"</a>",d=$("#ProjectDetails").find(".details"),e=500;d.hide(),$("div#ProjectDetails h2:first").append(c);var f=$("#ToggleProjectDetails");f.click(function(){d.slideToggle(e),f.text(f.text()==a?b:a)})}function toggleProjectTasks(){var a,b,c="Edit line item",d="Done editing this item",e=' <a href="#" class="toggle-task button inline-button edit">'+c+"</a>",f=' <a href="#" class="add-task button inline-button positive add">Add another line item</a>',g=500,h=$("#ManageTasks");0!=h.length&&(h.find(".edit-task").find(".field").hide(),h.find(".add-new-task").hide(),h.find(".edit-task").each(function(){a=$(this),b=$(a).children("legend"),$(b).append(e).show()}),h.find(".toggle-task").click(function(a){a.preventDefault();var b=$(this).parent().parent().children("div.field");b.slideToggle(g),$(this).text($(this).text()==c?d:c)}),0===h.find(".edit-task").length?h.find(".add-new-task:first").show().append(f):h.find(".edit-task:last").append(f),$(document).on("click","#ManageTasks a.add-task",function(a){$(this).hide().parent().next(".add-new-task").show().append(f),$(this).remove(),a.preventDefault()}))}function mobileMenu(){var a=$(".site-nav"),b=$(".site-nav-button");0!==a.length&&0!==b.length&&b.click(function(b){b.preventDefault(),$(this).toggleClass("active"),a.toggleClass("active")})}function beancounterInit(){$(".hidden").hide().removeClass("hidden"),toggleProjectDetails(),$("textarea").autosize(),toggleProjectTasks(),styliseCalendar(),ajaxClientVcard(),expensesVAT(),projectsVAT(),formIframeCheck(),timingClients(),popularClients(),closePopup(),beancounterSettings(),mobileMenu()}function beancounterPopup(){$("a.popup").colorbox({transition:"elastic"}),$("a.add_new_link").colorbox({transition:"elastic",iframe:!0,innerWidth:"695px",innerHeight:"80%",iframe:!0}),$("#Content").on("click","a.close-popup",function(a){$.fn.colorbox.close(),a.preventDefault()})}function initDatePicker(){$("fieldset.date").append('<a href="#" class="date-pick button date" title="Choose date"></a>'),$("fieldset.date").each(function(){updateDate($(this))})}function updateDate(a){var b=(new Date,$(a).children(".year").children("option:nth-child(1)").val()),c=$(a).children(".year").children("option").length,d=$(a).children(".year").children("option:nth-child("+c+")").val();$(a).children(".date-pick").datePicker({createButton:!1,startDate:"01/01/"+b,endDate:"31/12/"+d}).bind("click",function(){return e($(this).dpGetSelected()[0]),$(this).dpDisplay(),!1}).bind("dateSelected",function(a,b){e(b)}).bind("dpClosed",function(a,b){e(b[0])});var e=function(c){c=new Date(c);var d=c.getDate(),e=c.getMonth(),f=c.getFullYear();$(a).children(".day")[0].selectedIndex=d-1,$(a).children(".month")[0].selectedIndex=e,$(a).children(".year")[0].selectedIndex=f-b};$(a).children(".day, .month, .year").bind("change",function(){var b=new Date($(a).children(".year").val(),$(a).children(".month").val()-1,$(a).children(".day").val());$(a).children(".date-pick").dpSetSelected(b.asString())}),$(a).children(".day").trigger("change")}function showHideExtras(){var a='<p class="instructions"><a href="#" id="show_hide_extras_link">Add/edit extra details</a></p>';$("div.field").hide(),$("label.required").parent("div.field").show(),$("#title").parent().append(a),$("#show_hide_extras_link").click(function(){$("div.field").show(),$(this).parent().remove()})}function hideTime(){$("select.time").each(function(){var a=$(this).attr("name");$(this).parent().append('<input type="hidden" name="'+a+'" value="00" />'),$(this).remove()})}function generateInvoiceNumber(){var a=$("#internal_reference_number");0!==a.length&&(a.addClass("int").after('<a href="#" class="refresh button" id="invoice_button">Generate</a>'),$("#invoice_button").click(function(b){$(this).load("/ajax/invoice_number.php?mode=ajax","",function(){$(this).hide(),a.val($(this).html())}),b.preventDefault()}))}function initProjectDates(){project_dates(),$("#project_stage").change(function(){project_dates()})}function project_dates(){var a=$("#project_stage").val();$("fieldset.date").hide(),a.length>0&&($("#payment_required_day").parent().hide(),a>1&&$("#payment_expected_day").parent().show(),3===a&&$("#payment_required_day").parent().show())}Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.abbrDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.abbrMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.firstDayOfWeek=1,Date.format="dd/mm/yyyy",Date.fullYearStart="20",function(){function a(a,b){Date.prototype[a]||(Date.prototype[a]=b)}a("isLeapYear",function(){var a=this.getFullYear();return a%4==0&&a%100!=0||a%400==0}),a("isWeekend",function(){return 0==this.getDay()||6==this.getDay()}),a("isWeekDay",function(){return!this.isWeekend()}),a("getDaysInMonth",function(){return[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]}),a("getDayName",function(a){return a?Date.abbrDayNames[this.getDay()]:Date.dayNames[this.getDay()]}),a("getMonthName",function(a){return a?Date.abbrMonthNames[this.getMonth()]:Date.monthNames[this.getMonth()]}),a("getDayOfYear",function(){var a=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-a.getTime())/864e5)}),a("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/7)}),a("setDayOfYear",function(a){return this.setMonth(0),this.setDate(a),this}),a("addYears",function(a){return this.setFullYear(this.getFullYear()+a),this}),a("addMonths",function(a){var b=this.getDate();return this.setMonth(this.getMonth()+a),b>this.getDate()&&this.addDays(-this.getDate()),this}),a("addDays",function(a){return this.setTime(this.getTime()+864e5*a),this}),a("addHours",function(a){return this.setHours(this.getHours()+a),this}),a("addMinutes",function(a){return this.setMinutes(this.getMinutes()+a),this}),a("addSeconds",function(a){return this.setSeconds(this.getSeconds()+a),this}),a("zeroTime",function(){return this.setMilliseconds(0),this.setSeconds(0),this.setMinutes(0),this.setHours(0),this}),a("asString",function(a){var c=a||Date.format;return c.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("mmmm").join(this.getMonthName(!1)).split("mmm").join(this.getMonthName(!0)).split("mm").join(b(this.getMonth()+1)).split("dd").join(b(this.getDate())).split("hh").join(b(this.getHours())).split("min").join(b(this.getMinutes())).split("ss").join(b(this.getSeconds()))}),Date.fromString=function(a,b){var c=b||Date.format,d=new Date("01/01/1977"),e=0,f=c.indexOf("mmmm");if(f>-1){for(var g=0;g<Date.monthNames.length;g++){var h=a.substr(f,Date.monthNames[g].length);if(Date.monthNames[g]==h){e=Date.monthNames[g].length-4;break}}d.setMonth(g)}else if(f=c.indexOf("mmm"),f>-1){for(var h=a.substr(f,3),g=0;g<Date.abbrMonthNames.length&&Date.abbrMonthNames[g]!=h;g++);d.setMonth(g)}else d.setMonth(Number(a.substr(c.indexOf("mm"),2))-1);var i=c.indexOf("yyyy");i>-1?(i>f&&(i+=e),d.setFullYear(Number(a.substr(i,4)))):(i>f&&(i+=e),d.setFullYear(Number(Date.fullYearStart+a.substr(c.indexOf("yy"),2))));var j=c.indexOf("dd");return j>f&&(j+=e),d.setDate(Number(a.substr(j,2))),isNaN(d.getTime())?!1:d};var b=function(a){var b="0"+a;return b.substring(b.length-2)}}(),function(a){function b(a){this.ele=a,this.displayedMonth=null,this.displayedYear=null,this.startDate=null,this.endDate=null,this.showYearNavigation=null,this.closeOnSelect=null,this.displayClose=null,this.rememberViewedMonth=null,this.selectMultiple=null,this.numSelectable=null,this.numSelected=null,this.verticalPosition=null,this.horizontalPosition=null,this.verticalOffset=null,this.horizontalOffset=null,this.button=null,this.renderCallback=[],this.selectedDates={},this.inline=null,this.context="#dp-popup",this.settings={}}function c(b){return b._dpId?a.event._dpCache[b._dpId]:!1}a.fn.extend({renderCalendar:function(b){var c=function(a){return document.createElement(a)};if(b=a.extend({},a.fn.datePicker.defaults,b),b.showHeader!=a.dpConst.SHOW_HEADER_NONE)for(var d=a(c("tr")),e=Date.firstDayOfWeek;e<Date.firstDayOfWeek+7;e++){var f=e%7,g=Date.dayNames[f];d.append(jQuery(c("th")).attr({scope:"col",abbr:g,title:g,"class":0==f||6==f?"weekend":"weekday"}).html(b.showHeader==a.dpConst.SHOW_HEADER_SHORT?g.substr(0,1):g))}var h=a(c("table")).attr({cellspacing:2}).addClass("jCalendar").append(b.showHeader!=a.dpConst.SHOW_HEADER_NONE?a(c("thead")).append(d):c("thead")),i=a(c("tbody")),j=(new Date).zeroTime();j.setHours(12);var k=void 0==b.month?j.getMonth():b.month,l=b.year||j.getFullYear(),m=new Date(l,k,1,12,0,0),n=Date.firstDayOfWeek-m.getDay()+1;n>1&&(n-=7);var o=Math.ceil((-1*n+1+m.getDaysInMonth())/7);m.addDays(n-1);for(var p=function(c){return function(){if(b.hoverClass){var d=a(this);b.selectWeek?c&&!d.is(".disabled")&&d.parent().addClass("activeWeekHover"):d.addClass(b.hoverClass)}}},q=function(){if(b.hoverClass){var c=a(this);c.removeClass(b.hoverClass),c.parent().removeClass("activeWeekHover")}},r=0;r++<o;){for(var s=jQuery(c("tr")),t=b.dpController?m>b.dpController.startDate:!1,e=0;7>e;e++){var u=m.getMonth()==k,v=a(c("td")).text(m.getDate()+"").addClass((u?"current-month ":"other-month ")+(m.isWeekend()?"weekend ":"weekday ")+(u&&m.getTime()==j.getTime()?"today ":"")).data("datePickerDate",m.asString()).hover(p(t),q);s.append(v),b.renderCallback&&b.renderCallback(v,m,k,l),m=new Date(m.getFullYear(),m.getMonth(),m.getDate()+1,12,0,0)}i.append(s)}return h.append(i),this.each(function(){a(this).empty().append(h)})},datePicker:function(c){return a.event._dpCache||(a.event._dpCache=[]),c=a.extend({},a.fn.datePicker.defaults,c),this.each(function(){var d=a(this),e=!0;this._dpId||(this._dpId=a.guid++,a.event._dpCache[this._dpId]=new b(this),e=!1),c.inline&&(c.createButton=!1,c.displayClose=!1,c.closeOnSelect=!1,d.empty());var f=a.event._dpCache[this._dpId];if(f.init(c),!e&&c.createButton&&(f.button=a('<a href="#" class="dp-choose-date" title="'+a.dpText.TEXT_CHOOSE_DATE+'">'+a.dpText.TEXT_CHOOSE_DATE+"</a>").bind("click",function(){return d.dpDisplay(this),this.blur(),!1}),d.after(f.button)),!e&&d.is(":text")){d.bind("dateSelected",function(a,b){this.value=b.asString()}).bind("change",function(){if(""==this.value)f.clearSelected();else{var a=Date.fromString(this.value);a&&f.setSelected(a,!0,!0)}}),c.clickInput&&d.bind("click",function(){d.trigger("change"),d.dpDisplay()});var g=Date.fromString(this.value);""!=this.value&&g&&f.setSelected(g,!0,!0)}d.addClass("dp-applied")})},dpSetDisabled:function(a){return d.call(this,"setDisabled",a)},dpSetStartDate:function(a){return d.call(this,"setStartDate",a)},dpSetEndDate:function(a){return d.call(this,"setEndDate",a)},dpGetSelected:function(){var a=c(this[0]);return a?a.getSelected():null},dpSetSelected:function(a,b,c,e){return void 0==b&&(b=!0),void 0==c&&(c=!0),void 0==e&&(e=!0),d.call(this,"setSelected",Date.fromString(a),b,c,e)},dpSetDisplayedMonth:function(a,b){return d.call(this,"setDisplayedMonth",Number(a),Number(b),!0)},dpDisplay:function(a){return d.call(this,"display",a)},dpSetRenderCallback:function(a){return d.call(this,"setRenderCallback",a)},dpSetPosition:function(a,b){return d.call(this,"setPosition",a,b)},dpSetOffset:function(a,b){return d.call(this,"setOffset",a,b)},dpClose:function(){return d.call(this,"_closeCalendar",!1,this[0])},dpRerenderCalendar:function(){return d.call(this,"_rerenderCalendar")},_dpDestroy:function(){}});var d=function(a,b,d,e,f){return this.each(function(){var g=c(this);g&&g[a](b,d,e,f)})};a.extend(b.prototype,{init:function(a){this.setStartDate(a.startDate),this.setEndDate(a.endDate),this.setDisplayedMonth(Number(a.month),Number(a.year)),this.setRenderCallback(a.renderCallback),this.showYearNavigation=a.showYearNavigation,this.closeOnSelect=a.closeOnSelect,this.displayClose=a.displayClose,this.rememberViewedMonth=a.rememberViewedMonth,this.selectMultiple=a.selectMultiple,this.numSelectable=a.selectMultiple?a.numSelectable:1,this.numSelected=0,this.verticalPosition=a.verticalPosition,this.horizontalPosition=a.horizontalPosition,this.hoverClass=a.hoverClass,this.setOffset(a.verticalOffset,a.horizontalOffset),this.inline=a.inline,this.settings=a,this.inline&&(this.context=this.ele,this.display())},setStartDate:function(a){a&&(this.startDate=a instanceof Date?a:Date.fromString(a)),this.startDate||(this.startDate=(new Date).zeroTime()),this.setDisplayedMonth(this.displayedMonth,this.displayedYear)},setEndDate:function(a){a&&(this.endDate=a instanceof Date?a:Date.fromString(a)),this.endDate||(this.endDate=new Date("12/31/2999")),this.endDate.getTime()<this.startDate.getTime()&&(this.endDate=this.startDate),this.setDisplayedMonth(this.displayedMonth,this.displayedYear)},setPosition:function(a,b){this.verticalPosition=a,this.horizontalPosition=b},setOffset:function(a,b){this.verticalOffset=parseInt(a)||0,this.horizontalOffset=parseInt(b)||0},setDisabled:function(b){$e=a(this.ele),$e[b?"addClass":"removeClass"]("dp-disabled"),this.button&&($but=a(this.button),$but[b?"addClass":"removeClass"]("dp-disabled"),$but.attr("title",b?"":a.dpText.TEXT_CHOOSE_DATE)),$e.is(":text")&&$e.attr("disabled",b?"disabled":"")},setDisplayedMonth:function(b,c,d){if(void 0!=this.startDate&&void 0!=this.endDate){var e=new Date(this.startDate.getTime());e.setDate(1);var f=new Date(this.endDate.getTime());f.setDate(1);var g;!b&&!c||isNaN(b)&&isNaN(c)?(g=(new Date).zeroTime(),g.setDate(1)):g=isNaN(b)?new Date(c,this.displayedMonth,1):isNaN(c)?new Date(this.displayedYear,b,1):new Date(c,b,1),g.getTime()<e.getTime()?g=e:g.getTime()>f.getTime()&&(g=f);var h=this.displayedMonth,i=this.displayedYear;this.displayedMonth=g.getMonth(),this.displayedYear=g.getFullYear(),!d||this.displayedMonth==h&&this.displayedYear==i||(this._rerenderCalendar(),a(this.ele).trigger("dpMonthChanged",[this.displayedMonth,this.displayedYear]))}},setSelected:function(b,c,d,e){if(!(b<this.startDate||b.zeroTime()>this.endDate.zeroTime())){var f=this.settings;if(!(f.selectWeek&&(b=b.addDays(-(b.getDay()-Date.firstDayOfWeek+7)%7),b<this.startDate))&&c!=this.isSelected(b)){if(0==this.selectMultiple)this.clearSelected();else if(c&&this.numSelected==this.numSelectable)return;!d||this.displayedMonth==b.getMonth()&&this.displayedYear==b.getFullYear()||this.setDisplayedMonth(b.getMonth(),b.getFullYear(),!0),this.selectedDates[b.asString()]=c,this.numSelected+=c?1:-1;var g,h="td."+(b.getMonth()==this.displayedMonth?"current-month":"other-month");if(a(h,this.context).each(function(){a(this).data("datePickerDate")==b.asString()&&(g=a(this),f.selectWeek&&g.parent()[c?"addClass":"removeClass"]("selectedWeek"),g[c?"addClass":"removeClass"]("selected"))}),a("td",this.context).not(".selected")[this.selectMultiple&&this.numSelected==this.numSelectable?"addClass":"removeClass"]("unselectable"),e){var f=this.isSelected(b);$e=a(this.ele);var i=Date.fromString(b.asString());$e.trigger("dateSelected",[i,g,f]),$e.trigger("change")}}}},isSelected:function(a){return this.selectedDates[a.asString()]},getSelected:function(){var a=[];for(var b in this.selectedDates)1==this.selectedDates[b]&&a.push(Date.fromString(b));return a},clearSelected:function(){this.selectedDates={},this.numSelected=0,a("td.selected",this.context).removeClass("selected").parent().removeClass("selectedWeek")},display:function(b){if(!a(this.ele).is(".dp-disabled")){b=b||this.ele;var c,d,e,f=this,g=a(b),h=g.offset();if(f.inline)c=a(this.ele),d={id:"calendar-"+this.ele._dpId,"class":"dp-popup dp-popup-inline"},a(".dp-popup",c).remove(),e={};else{c=a("body"),d={id:"dp-popup","class":"dp-popup"},e={top:h.top+f.verticalOffset,left:h.left+f.horizontalOffset};var i=function(b){for(var c=b.target,d=a("#dp-popup")[0];;){if(c==d)return!0;if(c==document)return f._closeCalendar(),!1;c=a(c).parent()[0]}};this._checkMouse=i,f._closeCalendar(!0),a(document).bind("keydown.datepicker",function(a){27==a.keyCode&&f._closeCalendar()})}if(!f.rememberViewedMonth){var j=this.getSelected()[0];j&&(j=new Date(j),this.setDisplayedMonth(j.getMonth(),j.getFullYear(),!1))}c.append(a("<div></div>").attr(d).css(e).append(a("<h2></h2>"),a('<div class="dp-nav-prev"></div>').append(a('<a class="dp-nav-prev-year" href="#" title="'+a.dpText.TEXT_PREV_YEAR+'">⏪</a>').bind("click",function(){return f._displayNewMonth.call(f,this,0,-1)}),a('<a class="dp-nav-prev-month" href="#" title="'+a.dpText.TEXT_PREV_MONTH+'">◅</a>').bind("click",function(){return f._displayNewMonth.call(f,this,-1,0)})),a('<div class="dp-nav-next"></div>').append(a('<a class="dp-nav-next-year" href="#" title="'+a.dpText.TEXT_NEXT_YEAR+'">⏩</a>').bind("click",function(){return f._displayNewMonth.call(f,this,0,1)}),a('<a class="dp-nav-next-month" href="#" title="'+a.dpText.TEXT_NEXT_MONTH+'">▻</a>').bind("click",function(){return f._displayNewMonth.call(f,this,1,0)})),a('<div class="dp-calendar"></div>')).bgIframe());var k=this.inline?a(".dp-popup",this.context):a("#dp-popup");0==this.showYearNavigation&&a(".dp-nav-prev-year, .dp-nav-next-year",f.context).css("display","none"),this.displayClose&&k.append(a('<a href="#" id="dp-close">'+a.dpText.TEXT_CLOSE+"</a>").bind("click",function(){return f._closeCalendar(),!1})),f._renderCalendar(),a(this.ele).trigger("dpDisplayed",k),f.inline||(this.verticalPosition==a.dpConst.POS_BOTTOM&&k.css("top",h.top+g.height()-k.height()+f.verticalOffset),this.horizontalPosition==a.dpConst.POS_RIGHT&&k.css("left",h.left+g.width()-k.width()+f.horizontalOffset),a(document).bind("mousedown.datepicker",this._checkMouse))}},setRenderCallback:function(a){null!=a&&(a&&"function"==typeof a&&(a=[a]),this.renderCallback=this.renderCallback.concat(a))},cellRender:function(b,c){var d=this.dpController,e=new Date(c.getTime());b.bind("click",function(){var b=a(this);if(!b.is(".disabled")&&(d.setSelected(e,!b.is(".selected")||!d.selectMultiple,!1,!0),d.closeOnSelect)){if(d.settings.autoFocusNextInput){var c=d.ele,f=!1;a(":input",c.form).each(function(){return f?(a(this).focus(),!1):void(this==c&&(f=!0))})}else d.ele.focus();d._closeCalendar()}}),d.isSelected(e)?(b.addClass("selected"),d.settings.selectWeek&&b.parent().addClass("selectedWeek")):d.selectMultiple&&d.numSelected==d.numSelectable&&b.addClass("unselectable")},_applyRenderCallbacks:function(){var b=this;a("td",this.context).each(function(){for(var c=0;c<b.renderCallback.length;c++)$td=a(this),b.renderCallback[c].apply(this,[$td,Date.fromString($td.data("datePickerDate")),b.displayedMonth,b.displayedYear])})},_displayNewMonth:function(b,c,d){return a(b).is(".disabled")||this.setDisplayedMonth(this.displayedMonth+c,this.displayedYear+d,!0),b.blur(),!1},_rerenderCalendar:function(){this._clearCalendar(),this._renderCalendar()},_renderCalendar:function(){if(a("h2",this.context).html(new Date(this.displayedYear,this.displayedMonth,1).asString(a.dpText.HEADER_FORMAT)),a(".dp-calendar",this.context).renderCalendar(a.extend({},this.settings,{month:this.displayedMonth,year:this.displayedYear,renderCallback:this.cellRender,dpController:this,hoverClass:this.hoverClass})),this.displayedYear==this.startDate.getFullYear()&&this.displayedMonth==this.startDate.getMonth()){a(".dp-nav-prev-year",this.context).addClass("disabled"),a(".dp-nav-prev-month",this.context).addClass("disabled"),a(".dp-calendar td.other-month",this.context).each(function(){var b=a(this);Number(b.text())>20&&b.addClass("disabled")});var b=this.startDate.getDate();a(".dp-calendar td.current-month",this.context).each(function(){var c=a(this);Number(c.text())<b&&c.addClass("disabled")})}else{a(".dp-nav-prev-year",this.context).removeClass("disabled"),a(".dp-nav-prev-month",this.context).removeClass("disabled");var b=this.startDate.getDate();if(b>20){var c=this.startDate.getTime(),d=new Date(c);d.addMonths(1),this.displayedYear==d.getFullYear()&&this.displayedMonth==d.getMonth()&&a(".dp-calendar td.other-month",this.context).each(function(){var b=a(this);Date.fromString(b.data("datePickerDate")).getTime()<c&&b.addClass("disabled")})}}if(this.displayedYear==this.endDate.getFullYear()&&this.displayedMonth==this.endDate.getMonth()){a(".dp-nav-next-year",this.context).addClass("disabled"),a(".dp-nav-next-month",this.context).addClass("disabled"),a(".dp-calendar td.other-month",this.context).each(function(){var b=a(this);Number(b.text())<14&&b.addClass("disabled")});var b=this.endDate.getDate();a(".dp-calendar td.current-month",this.context).each(function(){var c=a(this);Number(c.text())>b&&c.addClass("disabled")})}else{a(".dp-nav-next-year",this.context).removeClass("disabled"),a(".dp-nav-next-month",this.context).removeClass("disabled");var b=this.endDate.getDate();if(13>b){var e=new Date(this.endDate.getTime());e.addMonths(-1),this.displayedYear==e.getFullYear()&&this.displayedMonth==e.getMonth()&&a(".dp-calendar td.other-month",this.context).each(function(){var c=a(this),d=Number(c.text());13>d&&d>b&&c.addClass("disabled")})}}this._applyRenderCallbacks()},_closeCalendar:function(b,c){c&&c!=this.ele||(a(document).unbind("mousedown.datepicker"),a(document).unbind("keydown.datepicker"),this._clearCalendar(),a("#dp-popup a").unbind(),a("#dp-popup").empty().remove(),b||a(this.ele).trigger("dpClosed",[this.getSelected()]))},_clearCalendar:function(){a(".dp-calendar td",this.context).unbind(),a(".dp-calendar",this.context).empty()}}),a.dpConst={SHOW_HEADER_NONE:0,SHOW_HEADER_SHORT:1,SHOW_HEADER_LONG:2,POS_TOP:0,POS_BOTTOM:1,POS_LEFT:0,POS_RIGHT:1,DP_INTERNAL_FOCUS:"dpInternalFocusTrigger"},a.dpText={TEXT_PREV_YEAR:"Previous year",TEXT_PREV_MONTH:"Previous month",TEXT_NEXT_YEAR:"Next year",TEXT_NEXT_MONTH:"Next month",TEXT_CLOSE:"Close",TEXT_CHOOSE_DATE:"Choose date",HEADER_FORMAT:"mmmm yyyy"},a.dpVersion="$Id: jquery.datePicker.js 108 2011-11-17 21:19:57Z kelvin.luck@gmail.com $",a.fn.datePicker.defaults={month:void 0,year:void 0,showHeader:a.dpConst.SHOW_HEADER_SHORT,startDate:void 0,endDate:void 0,inline:!1,renderCallback:null,createButton:!0,showYearNavigation:!0,closeOnSelect:!0,displayClose:!1,selectMultiple:!1,numSelectable:Number.MAX_VALUE,clickInput:!1,rememberViewedMonth:!0,selectWeek:!1,verticalPosition:a.dpConst.POS_TOP,horizontalPosition:a.dpConst.POS_LEFT,verticalOffset:0,horizontalOffset:0,hoverClass:"dp-hover",autoFocusNextInput:!1},void 0==a.fn.bgIframe&&(a.fn.bgIframe=function(){return this}),a(window).bind("unload",function(){var b=a.event._dpCache||[];for(var c in b)a(b[c].ele)._dpDestroy()})}(jQuery),function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var f=!!a.fn.prop;a.fn.attr2=function(){if(!f)return this.attr.apply(this,arguments);var a=this.prop.apply(this,arguments);return a&&a.jquery||"string"==typeof a?a:this.attr.apply(this,arguments)},a.fn.ajaxSubmit=function(b){function c(b){var c,d,e=a.param(b).split("&"),f=e.length,g=[];for(c=0;f>c;c++)e[c]=e[c].replace(/\+/g," "),d=e[c].split("="),g.push([decodeURIComponent(d[0]),decodeURIComponent(d[1])]);return g}function g(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var h=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});b.uploadProgress&&(h.xhr=function(){var a=jQuery.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),a}),h.data=null;var j=h.beforeSend;return h.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(h)}function h(c){function e(a){var b=null;try{a.contentWindow&&(b=a.contentWindow.document)}catch(c){d("cannot get iframe.contentWindow document: "+c)}if(b)return b;try{b=a.contentDocument?a.contentDocument:a.document}catch(c){d("cannot get iframe.contentDocument: "+c),b=a.document}return b}function g(){function b(){try{var a=e(r).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),h(A),w&&clearTimeout(w),w=void 0}}var c=l.attr2("target"),f=l.attr2("action");x.setAttribute("target",o),i||x.setAttribute("method","POST"),f!=m.url&&x.setAttribute("action",m.url),m.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),m.timeout&&(w=setTimeout(function(){v=!0,h(z)},m.timeout));var g=[];try{if(m.extraData)for(var j in m.extraData)m.extraData.hasOwnProperty(j)&&g.push(a.isPlainObject(m.extraData[j])&&m.extraData[j].hasOwnProperty("name")&&m.extraData[j].hasOwnProperty("value")?a('<input type="hidden" name="'+m.extraData[j].name+'">').val(m.extraData[j].value).appendTo(x)[0]:a('<input type="hidden" name="'+j+'">').val(m.extraData[j]).appendTo(x)[0]);m.iframeTarget||(q.appendTo("body"),r.attachEvent?r.attachEvent("onload",h):r.addEventListener("load",h,!1)),setTimeout(b,15);try{x.submit()}catch(k){var n=document.createElement("form").submit;n.apply(x)}}finally{x.setAttribute("action",f),c?x.setAttribute("target",c):l.removeAttr("target"),a(g).remove()}}function h(b){if(!s.aborted&&!F){if(E=e(r),E||(d("cannot access response document"),b=A),b===z&&s)return s.abort("timeout"),void y.reject(s,"timeout");if(b==A&&s)return s.abort("server abort"),void y.reject(s,"error","server abort");if(E&&E.location.href!=m.iframeSrc||v){r.detachEvent?r.detachEvent("onload",h):r.removeEventListener("load",h,!1);var c,f="success";try{if(v)throw"timeout";var g="xml"==m.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+g),!g&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(h,250);var i=E.body?E.body:E.documentElement;s.responseText=i?i.innerHTML:null,s.responseXML=E.XMLDocument?E.XMLDocument:E,g&&(m.dataType="xml"),s.getResponseHeader=function(a){var b={"content-type":m.dataType};return b[a]},i&&(s.status=Number(i.getAttribute("status"))||s.status,s.statusText=i.getAttribute("statusText")||s.statusText);var j=(m.dataType||"").toLowerCase(),k=/(json|script|text)/.test(j);if(k||m.textarea){var l=E.getElementsByTagName("textarea")[0];if(l)s.responseText=l.value,s.status=Number(l.getAttribute("status"))||s.status,s.statusText=l.getAttribute("statusText")||s.statusText;else if(k){var o=E.getElementsByTagName("pre")[0],p=E.getElementsByTagName("body")[0];o?s.responseText=o.textContent?o.textContent:o.innerText:p&&(s.responseText=p.textContent?p.textContent:p.innerText)}}else"xml"==j&&!s.responseXML&&s.responseText&&(s.responseXML=H(s.responseText));try{D=J(s,j,m)}catch(t){f="parsererror",s.error=c=t||f}}catch(t){d("error caught: ",t),f="error",s.error=c=t||f}s.aborted&&(d("upload aborted"),f=null),s.status&&(f=s.status>=200&&s.status<300||304===s.status?"success":"error"),"success"===f?(m.success&&m.success.call(m.context,D,"success",s),y.resolve(s.responseText,"success",s),n&&a.event.trigger("ajaxSuccess",[s,m])):f&&(void 0===c&&(c=s.statusText),m.error&&m.error.call(m.context,s,f,c),y.reject(s,"error",c),n&&a.event.trigger("ajaxError",[s,m,c])),n&&a.event.trigger("ajaxComplete",[s,m]),n&&!--a.active&&a.event.trigger("ajaxStop"),m.complete&&m.complete.call(m.context,s,f),F=!0,m.timeout&&clearTimeout(w),setTimeout(function(){m.iframeTarget||q.remove(),s.responseXML=null},100)
}}}var j,k,m,n,o,q,r,s,t,u,v,w,x=l[0],y=a.Deferred();if(c)for(k=0;k<p.length;k++)j=a(p[k]),f?j.prop("disabled",!1):j.removeAttr("disabled");if(m=a.extend(!0,{},a.ajaxSettings,b),m.context=m.context||m,o="jqFormIO"+(new Date).getTime(),m.iframeTarget?(q=a(m.iframeTarget),u=q.attr2("name"),u?o=u:q.attr2("name",o)):(q=a('<iframe name="'+o+'" src="'+m.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),r=q[0],s={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{r.contentWindow.document.execCommand&&r.contentWindow.document.execCommand("Stop")}catch(e){}q.attr("src",m.iframeSrc),s.error=c,m.error&&m.error.call(m.context,s,c,b),n&&a.event.trigger("ajaxError",[s,m,c]),m.complete&&m.complete.call(m.context,s,c)}},n=m.global,n&&0===a.active++&&a.event.trigger("ajaxStart"),n&&a.event.trigger("ajaxSend",[s,m]),m.beforeSend&&m.beforeSend.call(m.context,s,m)===!1)return m.global&&a.active--,y.reject(),y;if(s.aborted)return y.reject(),y;t=x.clk,t&&(u=t.name,u&&!t.disabled&&(m.extraData=m.extraData||{},m.extraData[u]=t.value,"image"==t.type&&(m.extraData[u+".x"]=x.clk_x,m.extraData[u+".y"]=x.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(m.extraData=m.extraData||{},m.extraData[C]=B),m.forceSync?g():setTimeout(g,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var i,j,k,l=this;"function"==typeof b&&(b={success:b}),i=this.attr2("method"),j=this.attr2("action"),k="string"==typeof j?a.trim(j):"",k=k||window.location.href||"",k&&(k=(k.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:k,success:a.ajaxSettings.success,type:i||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var m={};if(this.trigger("form-pre-serialize",[this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n=b.traditional;void 0===n&&(n=a.ajaxSettings.traditional);var o,p=[],q=this.formToArray(b.semantic,p);if(b.data&&(b.extraData=b.data,o=a.param(b.data,n)),b.beforeSubmit&&b.beforeSubmit(q,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[q,this,b,m]),m.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var r=a.param(q,n);o&&(r=r?r+"&"+o:o),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+r,b.data=null):b.data=r;var s=[];if(b.resetForm&&s.push(function(){l.resetForm()}),b.clearForm&&s.push(function(){l.clearForm(b.includeHidden)}),!b.dataType&&b.target){var t=b.success||function(){};s.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(t,arguments)})}else b.success&&s.push(b.success);b.success=function(a,c,d){for(var e=b.context||this,f=0,g=s.length;g>f;f++)s[f].apply(e,[a,c,d||l,l])};var u=a('input[type=file]:enabled[value!=""]',this),v=u.length>0,w="multipart/form-data",x=l.attr("enctype")==w||l.attr("encoding")==w,y=e.fileapi&&e.formdata;d("fileAPI :"+y);var z,A=(v||x)&&!y;b.iframe!==!1&&(b.iframe||A)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){z=h(q)}):z=h(q):z=(v||x)&&y?g(q):a.ajax(b),l.removeData("jqxhr").data("jqxhr",z);for(var B=0;B<p.length;B++)p[B]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name,j&&!l.disabled)if(b&&f.clk&&"image"==l.type)f.clk==l&&(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type){c&&c.push(l);var o=l.files;if(o.length)for(i=0;i<o.length;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&"undefined"!=typeof k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone(!0)):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery),function(a){beancounterAjaxFilter={config:{container:"PrimaryContent"},onReady:function(){var a=this;a.preFilter()},ajaxFilter:function(b,c){var d=this,e=a("#"+d.config.container),f='<div id="Loading">Loading new content&hellip;</div>';0===e.find(".ajax-container").length&&e.wrapInner('<div class="ajax-container" />'),e.find(".ajax-container").addClass("invisible").end().append(f);a.ajax({url:b,context:e.find(".ajax-container"),data:c}).done(function(b){var c=a("<div>").html(b).find("#"+d.config.container).html();a(this).html(c)}).always(function(){a("#Loading").remove(),e.find(".ajax-container").removeClass("invisible")})},preFilter:function(){var b,c=this,d=a("#filterForm"),e='<div id="FilterButton"><a href="#" id="ShowHideFilterLink">Show filter options</a></div>';a(".filter-form").prepend(e),a("#FilterButton").click(function(a){a.preventDefault(),d.slideToggle("slow",function(){})}),d.submit(function(b){b.preventDefault(),c.ajaxFilter(a(this).attr("action"),a(this).serialize())}),d.find("input").bind("keyup",function(){void 0!==b&&clearTimeout(b),b=setTimeout(function(){b=void 0,d.submit()},300)}),d.find("select").change(function(){d.submit()}),d.find("input:checkbox").click(function(){d.submit()})}}}(jQuery),$(document).ready(function(){beancounterAjaxFilter.onReady()});var ajaxFormOptions={target:"#Content .inner",beforeSubmit:beforeAjaxFormSubmit,success:ajaxFormSuccess,resetForm:!0};$("form").bind("form-pre-serialize",function(){}),function(a){beancounterAjaxPagination={config:{container:"PrimaryContent"},onReady:function(){var b=this;a("#"+b.config.container).on("click",".pagination a",function(c){var d=a(this).attr("href");c.preventDefault(),-1===d.indexOf("?mode=ajax")&&-1===d.indexOf("?")?d+="?mode=ajax":-1===d.indexOf("?mode=ajax")&&-1!==d.indexOf("?")&&(d+="&mode=ajax"),b.loadByAjax(d)}),b.loadFromHash()},loadByAjax:function(b){var c,d,e=this,f=a("#"+e.config.container),g='<div id="Loading">Loading new content&hellip;</div>';0===f.find(".ajax-container").length&&f.wrapInner('<div class="ajax-container" />'),f.find(".ajax-container").addClass("invisible").end().append(g),window.location.hash=e.urlHash(b),c=a.ajax({url:b,context:f.find(".ajax-container")}).done(function(b){d=a("<div>").html(b).find("#"+e.config.container).html(),a(this).html(d),"function"==typeof styliseCalendar&&styliseCalendar()}).always(function(){a("#Loading").remove(),f.find(".ajax-container").removeClass("invisible")})},loadFromHash:function(){var b,c,d,e=this,f=window.location.hash.replace("#","/"),g=a(".pagination").find(".selected").find("a").attr("href");f.length>0&&g.length>0&&-1===g.indexOf(f)&&(b=a(".pagination").find("li:nth-child(2)").find("a").attr("href"),b=b.replace("/",""),f=f.replace("/",""),c="/"+b+f.replace("/","")+"?mode=ajax",d=e.urlHash(g),e.loadByAjax(c))},urlHash:function(a){var b=a.replace(a.split("/")[1]+"/","");return-1!==b.indexOf("?")&&(b=b.split("?")[0]),b}}}(jQuery),$(document).ready(function(){beancounterAjaxPagination.onReady()}),function(a){var b,c,d={className:"autosizejs",append:"",callback:!1},e="hidden",f="border-box",g="lineHeight",h='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden;"/>',i=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],j="oninput",k="onpropertychange",l=a(h).data("autosize",!0)[0];l.style.lineHeight="99px","99px"===a(l).css(g)&&i.push(g),l.style.lineHeight="",a.fn.autosize=function(g){return g=a.extend({},d,g||{}),l.parentNode!==document.body&&(a(document.body).append(l),l.value="\n\n\n",l.scrollTop=9e4,b=l.scrollHeight===l.scrollTop+l.clientHeight),this.each(function(){function d(){c=p,l.className=g.className,a.each(i,function(a,b){l.style[b]=q.css(b)})}function h(){var a,f,h;if(c!==p&&d(),!n){n=!0,l.value=p.value+g.append,l.style.overflowY=p.style.overflowY,h=parseInt(p.style.height,10),l.style.width=Math.max(q.width(),0)+"px",b?a=l.scrollHeight:(l.scrollTop=0,l.scrollTop=9e4,a=l.scrollTop);var i=parseInt(q.css("maxHeight"),10);i=i&&i>0?i:9e4,a>i?(a=i,f="scroll"):m>a&&(a=m),a+=r,p.style.overflowY=f||e,h!==a&&(p.style.height=a+"px",s&&g.callback.call(p)),setTimeout(function(){n=!1},1)}}var m,n,o,p=this,q=a(p),r=0,s=a.isFunction(g.callback);q.data("autosize")||((q.css("box-sizing")===f||q.css("-moz-box-sizing")===f||q.css("-webkit-box-sizing")===f)&&(r=q.outerHeight()-q.height()),m=Math.max(parseInt(q.css("minHeight"),10)-r,q.height()),o="none"===q.css("resize")||"vertical"===q.css("resize")?"none":"horizontal",q.css({overflow:e,overflowY:e,wordWrap:"break-word",resize:o}).data("autosize",!0),k in p?j in p?p[j]=p.onkeyup=h:p[k]=h:p[j]=h,a(window).on("resize",function(){n=!1,h()}),q.on("autosize",function(){n=!1,h()}),h())})}}(window.jQuery||window.Zepto),$(document).ready(function(){beancounterInit()}),function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Chartist=b()}(this,function(){var a={};return a.version="0.1.11",function(a,b,c){"use strict";c.noop=function(a){return a},c.alphaNumerate=function(a){return String.fromCharCode(97+a%26)},c.extend=function(a,b){a=a||{};for(var d in b)a[d]="object"==typeof b[d]?c.extend(a[d],b[d]):b[d];return a},c.getHeight=function(a){return a.clientHeight||Math.round(a.getBBox().height)||a.parentNode.clientHeight},c.getWidth=function(a){return a.clientWidth||Math.round(a.getBBox().width)||a.parentNode.clientWidth},c.createSvg=function(a,d,e,f){var g,h=a.nodeType?a:b.querySelector(a);if(!h)throw'Container node with selector "'+a+'" not found';return void 0!==h._ctChart?(g=h._ctChart.attr({width:d||"100%",height:e||"100%"}).removeAllClasses().addClass(f),g.empty()):(g=c.svg("svg").attr({width:d||"100%",height:e||"100%"}).addClass(f),h.appendChild(g._node),h._ctChart=g),g},c.getDataArray=function(a){for(var b=[],c=0;c<a.series.length;c++)b[c]="object"==typeof a.series[c]&&void 0!==a.series[c].data?a.series[c].data:a.series[c];return b},c.normalizeDataArray=function(a,b){for(var c=0;c<a.length;c++)if(a[c].length!==b)for(var d=a[c].length;b>d;d++)a[c][d]=0;return a},c.orderOfMagnitude=function(a){return Math.floor(Math.log(Math.abs(a))/Math.LN10)},c.projectLength=function(a,b,d,e){var f=c.getAvailableHeight(a,e);return b/d.range*f},c.getAvailableHeight=function(a,b){return c.getHeight(a._node)-2*b.chartPadding-b.axisX.offset},c.getHighLow=function(a){var b,c,d={high:-Number.MAX_VALUE,low:Number.MAX_VALUE};for(b=0;b<a.length;b++)for(c=0;c<a[b].length;c++)a[b][c]>d.high&&(d.high=a[b][c]),a[b][c]<d.low&&(d.low=a[b][c]);return d},c.getBounds=function(a,b,d,e){var f,g,h,i=c.getHighLow(b);for(i.high=d.high||(0===d.high?0:i.high),i.low=d.low||(0===d.low?0:i.low),(e||0===e)&&(i.high=Math.max(e,i.high),i.low=Math.min(e,i.low)),i.valueRange=i.high-i.low,i.oom=c.orderOfMagnitude(i.valueRange),i.min=Math.floor(i.low/Math.pow(10,i.oom))*Math.pow(10,i.oom),i.max=Math.ceil(i.high/Math.pow(10,i.oom))*Math.pow(10,i.oom),i.range=i.max-i.min,i.step=Math.pow(10,i.oom),i.numberOfSteps=Math.round(i.range/i.step);;){var j=c.projectLength(a,i.step/2,i,d);if(!(j>=d.axisY.scaleMinSpace))break;i.step/=2}for(g=i.min,h=i.max,f=i.min;f<=i.max;f+=i.step)f+i.step<i.low&&(g+=i.step),f-i.step>i.high&&(h-=i.step);for(i.min=g,i.max=h,i.range=i.max-i.min,i.values=[],f=i.min;f<=i.max;f+=i.step)i.values.push(f);return i},c.calculateLabelOffset=function(a,b,c,d,e){for(var f=0,g=0;g<b.length;g++){var h=d(b[g],g);if(h||0===h){var i=a.elem("text",{dx:0,dy:0},c).text(""+h);f=Math.max(f,e(i._node)),i.remove()}}return f},c.interpolateData=function(a,b,c){for(var d=0;d<a.length;d++){var e=b(a[d],d);(e||0===e)&&c(a,d,e)}},c.polarToCartesian=function(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},c.createChartRect=function(a,b,d,e){return{x1:b.chartPadding+e,y1:(b.height||c.getHeight(a._node))-b.chartPadding-d,x2:(b.width||c.getWidth(a._node))-b.chartPadding,y2:b.chartPadding,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}}},c.createXAxis=function(a,b,d,e,f){b.labels.forEach(function(g,h){var i=f.axisX.labelInterpolationFnc(g,h),j=a.x1+a.width()/b.labels.length*h;if((i||0===i)&&(f.axisX.showGrid&&d.elem("line",{x1:j,y1:a.y1,x2:j,y2:a.y2},[f.classNames.grid,f.classNames.horizontal].join(" ")),f.axisX.showLabel)){var k=e.elem("text",{dx:j+2},[f.classNames.label,f.classNames.horizontal].join(" ")).text(""+i);k.attr({dy:a.y1+c.getHeight(k._node)+f.axisX.offset})}})},c.createYAxis=function(a,b,c,d,e,f){b.values.forEach(function(g,h){var i=f.axisY.labelInterpolationFnc(g,h),j=a.y1-a.height()/b.values.length*h;(i||0===i)&&(f.axisY.showGrid&&c.elem("line",{x1:a.x1,y1:j,x2:a.x2,y2:j},[f.classNames.grid,f.classNames.vertical].join(" ")),f.axisY.showLabel&&d.elem("text",{dx:"right"===f.axisY.labelAlign?e-f.axisY.offset+f.chartPadding:f.chartPadding,dy:j-2,"text-anchor":"right"===f.axisY.labelAlign?"end":"start"},[f.classNames.label,f.classNames.vertical].join(" ")).text(""+i))})},c.projectPoint=function(a,b,c,d){return{x:a.x1+a.width()/c.length*d,y:a.y1-a.height()*(c[d]-b.min)/(b.range+b.step)}},c.optionsProvider=function(b,d,e,f){function g(){if(h=c.extend({},j),e)for(i=0;i<e.length;i++){var b=a.matchMedia(e[i][0]);b.matches&&(h=c.extend(h,e[i][1]))}return f(h),h}var h,i,j=c.extend(c.extend({},b),d),k=[];if(!a.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(e)for(i=0;i<e.length;i++){var l=a.matchMedia(e[i][0]);l.addListener(g),k.push(l)}return g()},c.catmullRom2bezier=function(a,b){for(var c=[],d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4===d?f[3]={x:+a[0],y:+a[1]}:e-2===d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4===d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push([(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}}(window,document,a),function(a,b,c){"use strict";c.svg=function(a,d,e,f){function g(a,b){return Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])}),a}function h(a,c,d,e,f){var h=b.createElementNS(p,c);return h._ctSvgElement=a,f&&f.appendChild(h),d&&g(h,d),e&&m(h,e),h}function i(a,c){a.appendChild(b.createTextNode(c))}function j(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function k(a){a.parentNode.removeChild(a)}function l(a){return a.getAttribute("class")?a.getAttribute("class").trim().split(/\s+/):[]}function m(a,b){a.setAttribute("class",l(a).concat(b.trim().split(/\s+/)).filter(function(a,b,c){return c.indexOf(a)===b}).join(" "))}function n(a,b){var c=b.trim().split(/\s+/);a.setAttribute("class",l(a).filter(function(a){return-1===c.indexOf(a)}).join(" "))}function o(a){a.className=""}var p="http://www.w3.org/2000/svg";return{_node:h(this,a,d,e,f?f._node:void 0),_parent:f,parent:function(){return this._parent},attr:function(a){return g(this._node,a),this},empty:function(){return j(this._node),this},remove:function(){return k(this._node),this},elem:function(a,b,d){return c.svg(a,b,d,this)},text:function(a){return i(this._node,a),this},addClass:function(a){return m(this._node,a),this},removeClass:function(a){return n(this._node,a),this},removeAllClasses:function(){return o(this._node),this},classes:function(){return l(this._node)}}}}(window,document,a),function(a,b,c){"use strict";c.Line=function(b,d,e,f){function g(a){var e,f,g,h=[],j=c.normalizeDataArray(c.getDataArray(d),d.labels.length);i=c.createSvg(b,a.width,a.height,a.classNames.chart),g=c.getBounds(i,j,a),e=a.axisX.offset,a.axisX.showLabel&&(e+=c.calculateLabelOffset(i,d.labels,[a.classNames.label,a.classNames.horizontal].join(" "),a.axisX.labelInterpolationFnc,c.getHeight)),f=a.axisY.offset,a.axisY.showLabel&&(f+=c.calculateLabelOffset(i,g.values,[a.classNames.label,a.classNames.horizontal].join(" "),a.axisY.labelInterpolationFnc,c.getWidth));var k=c.createChartRect(i,a,e,f),l=i.elem("g"),m=i.elem("g");c.createXAxis(k,d,m,l,a),c.createYAxis(k,g,m,l,f,a);for(var n=0;n<d.series.length;n++){h[n]=i.elem("g"),h[n].addClass([a.classNames.series,d.series[n].className||a.classNames.series+"-"+c.alphaNumerate(n)].join(" "));var o,p=c.projectPoint(k,g,j[n],0),q=[p.x,p.y];a.showPoint&&(o=h[n].elem("line",{x1:p.x,y1:p.y,x2:p.x+.01,y2:p.y},a.classNames.point));for(var r=1;r<j[n].length;r++)p=c.projectPoint(k,g,j[n],r),q.push(p.x,p.y),a.showPoint&&(o=h[n].elem("line",{x1:p.x,y1:p.y,x2:p.x+.01,y2:p.y},a.classNames.point));if(a.showLine){var s="M"+q[0]+","+q[1]+" ";if(a.lineSmooth&&q.length>4)for(var t=c.catmullRom2bezier(q),u=0;u<t.length;u++)s+="C"+t[u].join();else for(var v=3;v<q.length;v+=2)s+="L "+q[v-1]+","+q[v];h[n].elem("path",{d:s},a.classNames.line)}}}var h,i,j={axisX:{offset:10,showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop},axisY:{offset:15,showLabel:!0,showGrid:!0,labelAlign:"right",labelInterpolationFnc:c.noop,scaleMinSpace:30},width:void 0,height:void 0,showLine:!0,showPoint:!0,lineSmooth:!0,low:void 0,high:void 0,chartPadding:5,classNames:{chart:"ct-chart-line",label:"ct-label",series:"ct-series",line:"ct-line",point:"ct-point",grid:"ct-grid",vertical:"ct-vertical",horizontal:"ct-horizontal"}};return h=c.optionsProvider(j,e,f,function(a){h=a,g(h)}),a.addEventListener("resize",function(){g(h)}),{version:c.version,update:function(){g(h)}}}}(window,document,a),function(a,b,c){"use strict";c.Bar=function(b,d,e,f){function g(a){var e,f,g,h=[],j=c.normalizeDataArray(c.getDataArray(d),d.labels.length);i=c.createSvg(b,a.width,a.height,a.classNames.chart),g=c.getBounds(i,j,a,0),e=a.axisX.offset,a.axisX.showLabel&&(e+=c.calculateLabelOffset(i,d.labels,[a.classNames.label,a.classNames.horizontal].join(" "),a.axisX.labelInterpolationFnc,c.getHeight)),f=a.axisY.offset,a.axisY.showLabel&&(f+=c.calculateLabelOffset(i,g.values,[a.classNames.label,a.classNames.horizontal].join(" "),a.axisY.labelInterpolationFnc,c.getWidth));var k=c.createChartRect(i,a,e,f),l=i.elem("g"),m=i.elem("g"),n=c.projectPoint(k,g,[0],0);c.createXAxis(k,d,m,l,a),c.createYAxis(k,g,m,l,f,a);for(var o=0;o<d.series.length;o++){var p=o-(d.series.length-1)/2,q=k.width()/j[o].length/2;h[o]=i.elem("g"),h[o].addClass([a.classNames.series,d.series[o].className||a.classNames.series+"-"+c.alphaNumerate(o)].join(" "));for(var r=0;r<j[o].length;r++){var s,t=c.projectPoint(k,g,j[o],r);t.x+=q+p*a.seriesBarDistance,s=h[o].elem("line",{x1:t.x,y1:n.y,x2:t.x,y2:t.y},a.classNames.bar+(d.series[o].barClasses?" "+d.series[o].barClasses:""))}}}var h,i,j={axisX:{offset:10,showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop},axisY:{offset:15,showLabel:!0,showGrid:!0,labelAlign:"right",labelInterpolationFnc:c.noop,scaleMinSpace:40},width:void 0,height:void 0,high:void 0,low:void 0,chartPadding:5,seriesBarDistance:15,classNames:{chart:"ct-chart-bar",label:"ct-label",series:"ct-series",bar:"ct-bar",thin:"ct-thin",thick:"ct-thick",grid:"ct-grid",vertical:"ct-vertical",horizontal:"ct-horizontal"}};return h=c.optionsProvider(j,e,f,function(a){h=a,g(h)}),a.addEventListener("resize",function(){g(h)}),{version:c.version,update:function(){g(h)}}}}(window,document,a),function(a,b,c){"use strict";c.Pie=function(b,d,e,f){function g(a,b,c){var d=b.x>a.x;return d&&"explode"===c||!d&&"implode"===c?"start":d&&"implode"===c||!d&&"explode"===c?"end":"middle"}function h(a){var e,f,h,i,k=[],l=a.startAngle,m=c.getDataArray(d);j=c.createSvg(b,a.width,a.height,a.classNames.chart),e=c.createChartRect(j,a,0,0),f=Math.min(e.width()/2,e.height()/2),i=a.total||m.reduce(function(a,b){return a+b},0),f-=a.donut?a.donutWidth/2:0,h=a.donut?f:f/2,h+=a.labelOffset;for(var n={x:e.x1+e.width()/2,y:e.y2+e.height()/2},o=0;o<d.series.length;o++){k[o]=j.elem("g"),k[o].addClass([a.classNames.series,d.series[o].className||a.classNames.series+"-"+c.alphaNumerate(o)].join(" "));var p=l+m[o]/i*360;p-l===360&&(p-=.01);var q=c.polarToCartesian(n.x,n.y,f,l-(0===o?0:.2)),r=c.polarToCartesian(n.x,n.y,f,p),s=180>=p-l?"0":"1",t=["M",r.x,r.y,"A",f,f,0,s,0,q.x,q.y];a.donut===!1&&t.push("L",n.x,n.y);var u=k[o].elem("path",{d:t.join(" ")},a.classNames.slice+(a.donut?" "+a.classNames.donut:""));if(a.donut===!0&&u.attr({style:"stroke-width: "+ +a.donutWidth+"px"}),a.showLabel){var v=c.polarToCartesian(n.x,n.y,h,l+(p-l)/2),w=a.labelInterpolationFnc(d.labels?d.labels[o]:m[o],o);k[o].elem("text",{dx:v.x,dy:v.y,"text-anchor":g(n,v,a.labelDirection),text:""+w},a.classNames.label).text(""+w)}l=p}}var i,j,k={width:void 0,height:void 0,chartPadding:5,classNames:{chart:"ct-chart-pie",series:"ct-series",slice:"ct-slice",donut:"ct-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelInterpolationFnc:c.noop,labelOverflow:!1,labelDirection:"neutral"};return i=c.optionsProvider(k,e,f,function(a){i=a,h(i)}),a.addEventListener("resize",function(){h(i)}),{version:c.version,update:function(){h(i)}}}}(window,document,a),a}),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=ab+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=z.length,c=(R+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?A.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in s[0]&&!s[0].contains(a.target)&&(a.stopPropagation(),s.focus())}function k(){var b,c=a.data(Q,_);null==c?(L=a.extend({},$),console&&console.log&&console.log("Error: cboxElement missing settings object")):L=a.extend({},c);for(b in L)a.isFunction(L[b])&&"on"!==b.slice(0,2)&&(L[b]=L[b].call(Q));L.rel=L.rel||Q.rel||a(Q).data("rel")||"nofollow",L.href=L.href||a(Q).attr("href"),L.title=L.title||Q.title,"string"==typeof L.href&&(L.href=a.trim(L.href))}function l(c,d){a(b).trigger(c),ib.trigger(c),a.isFunction(d)&&d.call(Q)}function m(){var a,b,c,d,e,f=ab+"Slideshow_",g="click."+ab;L.slideshow&&z[1]?(b=function(){clearTimeout(a)},c=function(){(L.loop||z[R+1])&&(a=setTimeout(X.next,L.slideshowSpeed))},d=function(){G.html(L.slideshowStop).unbind(g).one(g,e),ib.bind(eb,c).bind(db,b).bind(fb,e),s.removeClass(f+"off").addClass(f+"on")},e=function(){b(),ib.unbind(eb,c).unbind(db,b).unbind(fb,e),G.html(L.slideshowStart).unbind(g).one(g,function(){X.next(),d()}),s.removeClass(f+"on").addClass(f+"off")},L.slideshowAuto?d():e()):s.removeClass(f+"off "+f+"on")}function n(c){V||(Q=c,k(),z=a(Q),R=0,"nofollow"!==L.rel&&(z=a("."+bb).filter(function(){var b,c=a.data(this,_);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===L.rel}),R=z.index(Q),-1===R&&(z=z.add(Q),R=z.length-1)),r.css({opacity:parseFloat(L.opacity),cursor:L.overlayClose?"pointer":"auto",visibility:"visible"}).show(),Y&&s.add(r).removeClass(Y),L.className&&s.add(r).addClass(L.className),Y=L.className,J.html(L.close).show(),T||(T=U=!0,s.css({visibility:"hidden",display:"block"}),B=d(jb,"LoadedContent","width:0; height:0; overflow:hidden").appendTo(u),M=v.height()+y.height()+u.outerHeight(!0)-u.height(),N=w.width()+x.width()+u.outerWidth(!0)-u.width(),O=B.outerHeight(!0),P=B.outerWidth(!0),L.w=g(L.initialWidth,"x"),L.h=g(L.initialHeight,"y"),X.position(),m(),l(cb,L.onOpen),K.add(E).hide(),s.focus(),b.addEventListener&&(b.addEventListener("focus",j,!0),ib.one(gb,function(){b.removeEventListener("focus",j,!0)})),L.returnFocus&&ib.one(gb,function(){a(Q).focus()})),q())}function o(){!s&&b.body&&(Z=!1,A=a(c),s=d(jb).attr({id:_,"class":a.support.opacity===!1?ab+"IE":"",role:"dialog",tabindex:"-1"}).hide(),r=d(jb,"Overlay").hide(),D=d(jb,"LoadingOverlay").add(d(jb,"LoadingGraphic")),t=d(jb,"Wrapper"),u=d(jb,"Content").append(E=d(jb,"Title"),F=d(jb,"Current"),I=a('<button type="button"/>').attr({id:ab+"Previous"}),H=a('<button type="button"/>').attr({id:ab+"Next"}),G=d("button","Slideshow"),D,J=a('<button type="button"/>').attr({id:ab+"Close"})),t.append(d(jb).append(d(jb,"TopLeft"),v=d(jb,"TopCenter"),d(jb,"TopRight")),d(jb,!1,"clear:left").append(w=d(jb,"MiddleLeft"),u,x=d(jb,"MiddleRight")),d(jb,!1,"clear:left").append(d(jb,"BottomLeft"),y=d(jb,"BottomCenter"),d(jb,"BottomRight"))).find("div div").css({"float":"left"}),C=d(jb,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),K=H.add(I).add(F).add(G),a(b.body).append(r,s.append(t,C)))}function p(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.control||(a.preventDefault(),n(this))}return s?(Z||(Z=!0,H.click(function(){X.next()}),I.click(function(){X.prev()}),J.click(function(){X.close()}),r.click(function(){L.overlayClose&&X.close()}),a(b).bind("keydown."+ab,function(a){var b=a.keyCode;T&&L.escKey&&27===b&&(a.preventDefault(),X.close()),T&&L.arrowKey&&z[1]&&!a.altKey&&(37===b?(a.preventDefault(),I.click()):39===b&&(a.preventDefault(),H.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+ab,"."+bb,c):a("."+bb).live("click."+ab,c)),!0):!1}function q(){var b,e,f,j=X.prep,m=++kb;U=!0,S=!1,Q=z[R],k(),l(hb),l(db,L.onLoad),L.h=L.height?g(L.height,"y")-O-M:L.innerHeight&&g(L.innerHeight,"y"),L.w=L.width?g(L.width,"x")-P-N:L.innerWidth&&g(L.innerWidth,"x"),L.mw=L.w,L.mh=L.h,L.maxWidth&&(L.mw=g(L.maxWidth,"x")-P-N,L.mw=L.w&&L.w<L.mw?L.w:L.mw),L.maxHeight&&(L.mh=g(L.maxHeight,"y")-O-M,L.mh=L.h&&L.h<L.mh?L.h:L.mh),b=L.href,W=setTimeout(function(){D.show()},100),L.inline?(f=d(jb).hide().insertBefore(a(b)[0]),ib.one(hb,function(){f.replaceWith(B.children())}),j(a(b))):L.iframe?j(" "):L.html?j(L.html):h(L,b)?(b=i(L,b),a(S=new Image).addClass(ab+"Photo").bind("error",function(){L.title=!1,j(d(jb,"Error").html(L.imgError))}).one("load",function(){var b;m===kb&&(S.alt=a(Q).attr("alt")||a(Q).attr("data-alt")||"",L.retinaImage&&c.devicePixelRatio>1&&(S.height=S.height/c.devicePixelRatio,S.width=S.width/c.devicePixelRatio),L.scalePhotos&&(e=function(){S.height-=S.height*b,S.width-=S.width*b},L.mw&&S.width>L.mw&&(b=(S.width-L.mw)/S.width,e()),L.mh&&S.height>L.mh&&(b=(S.height-L.mh)/S.height,e())),L.h&&(S.style.marginTop=Math.max(L.mh-S.height,0)/2+"px"),z[1]&&(L.loop||z[R+1])&&(S.style.cursor="pointer",S.onclick=function(){X.next()}),S.style.width=S.width+"px",S.style.height=S.height+"px",setTimeout(function(){j(S)},1))}),setTimeout(function(){S.src=b},1)):b&&C.load(b,L.data,function(b,c){m===kb&&j("error"===c?d(jb,"Error").html(L.xhrError):a(this).contents())})}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$={transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0},_="colorbox",ab="cbox",bb=ab+"Element",cb=ab+"_open",db=ab+"_load",eb=ab+"_complete",fb=ab+"_cleanup",gb=ab+"_closed",hb=ab+"_purge",ib=a("<a/>"),jb="div",kb=0;
a.colorbox||(a(o),X=a.fn[_]=a[_]=function(b,c){var d=this;if(b=b||{},o(),p()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,_,a.extend({},a.data(this,_)||$,b))}).addClass(bb),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&n(d[0])}return d},X.position=function(a,b){function c(a){v[0].style.width=y[0].style.width=u[0].style.width=parseInt(a.style.width,10)-N+"px",u[0].style.height=w[0].style.height=x[0].style.height=parseInt(a.style.height,10)-M+"px"}var d,f,h,i=0,j=0,k=s.offset();A.unbind("resize."+ab),s.css({top:-9e4,left:-9e4}),f=A.scrollTop(),h=A.scrollLeft(),L.fixed?(k.top-=f,k.left-=h,s.css({position:"fixed"})):(i=f,j=h,s.css({position:"absolute"})),j+=L.right!==!1?Math.max(A.width()-L.w-P-N-g(L.right,"x"),0):L.left!==!1?g(L.left,"x"):Math.round(Math.max(A.width()-L.w-P-N,0)/2),i+=L.bottom!==!1?Math.max(e()-L.h-O-M-g(L.bottom,"y"),0):L.top!==!1?g(L.top,"y"):Math.round(Math.max(e()-L.h-O-M,0)/2),s.css({top:k.top,left:k.left,visibility:"visible"}),a=s.width()===L.w+P&&s.height()===L.h+O?0:a||0,t[0].style.width=t[0].style.height="9999px",d={width:L.w+P+N,height:L.h+O+M,top:i,left:j},0===a&&s.css(d),s.dequeue().animate(d,{duration:a,complete:function(){c(this),U=!1,t[0].style.width=L.w+P+N+"px",t[0].style.height=L.h+O+M+"px",L.reposition&&setTimeout(function(){A.bind("resize."+ab,X.position)},1),b&&b()},step:function(){c(this)}})},X.resize=function(a){T&&(a=a||{},a.width&&(L.w=g(a.width,"x")-P-N),a.innerWidth&&(L.w=g(a.innerWidth,"x")),B.css({width:L.w}),a.height&&(L.h=g(a.height,"y")-O-M),a.innerHeight&&(L.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(B.css({height:"auto"}),L.h=B.height()),B.css({height:L.h}),X.position("none"===L.transition?0:L.speed))},X.prep=function(b){function c(){return L.w=L.w||B.width(),L.w=L.mw&&L.mw<L.w?L.mw:L.w,L.w}function e(){return L.h=L.h||B.height(),L.h=L.mh&&L.mh<L.h?L.mh:L.h,L.h}if(T){var g,j="none"===L.transition?0:L.speed;B.empty().remove(),B=d(jb,"LoadedContent").append(b),B.hide().appendTo(C.show()).css({width:c(),overflow:L.scrolling?"auto":"hidden"}).css({height:e()}).prependTo(u),C.hide(),a(S).css({"float":"none"}),g=function(){function b(){a.support.opacity===!1&&s[0].style.removeAttribute("filter")}var c,e,g=z.length,k="frameBorder",m="allowTransparency";T&&(e=function(){clearTimeout(W),D.hide(),l(eb,L.onComplete)},E.html(L.title).add(B).show(),g>1?("string"==typeof L.current&&F.html(L.current.replace("{current}",R+1).replace("{total}",g)).show(),H[L.loop||g-1>R?"show":"hide"]().html(L.next),I[L.loop||R?"show":"hide"]().html(L.previous),L.slideshow&&G.show(),L.preloading&&a.each([f(-1),f(1)],function(){var b,c,d=z[this],e=a.data(d,_);e&&e.href?(b=e.href,a.isFunction(b)&&(b=b.call(d))):b=a(d).attr("href"),b&&h(e,b)&&(b=i(e,b),c=new Image,c.src=b)})):K.hide(),L.iframe?(c=d("iframe")[0],k in c&&(c[k]=0),m in c&&(c[m]="true"),L.scrolling||(c.scrolling="no"),a(c).attr({src:L.href,name:(new Date).getTime(),"class":ab+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",e).appendTo(B),ib.one(hb,function(){c.src="//about:blank"}),L.fastIframe&&a(c).trigger("load")):e(),"fade"===L.transition?s.fadeTo(j,1,b):b())},"fade"===L.transition?s.fadeTo(j,0,function(){X.position(0,g)}):X.position(j,g)}},X.next=function(){!U&&z[1]&&(L.loop||z[R+1])&&(R=f(1),n(z[R]))},X.prev=function(){!U&&z[1]&&(L.loop||R)&&(R=f(-1),n(z[R]))},X.close=function(){T&&!V&&(V=!0,T=!1,l(fb,L.onCleanup),A.unbind("."+ab),r.fadeTo(L.fadeOut||0,0),s.stop().fadeTo(L.fadeOut||0,0,function(){s.add(r).css({opacity:1,cursor:"auto"}).hide(),l(hb),B.empty().remove(),setTimeout(function(){V=!1,l(gb,L.onClosed)},1)}))},X.remove=function(){s&&(s.stop(),a.colorbox.close(),s.stop().remove(),r.remove(),V=!1,s=null,a("."+bb).removeData(_).removeClass(bb),a(b).unbind("click."+ab))},X.element=function(){return a(Q)},X.settings=$)}(jQuery,document,window),beancounterPopup(),$(document).ready(function(){initDatePicker()}),$(document).ready(function(){showHideExtras()}),$(document).ready(function(){hideTime()}),$(document).ready(function(){generateInvoiceNumber()}),$(document).ready(function(){initProjectDates()}),function(a){beancounterTax={config:{},onReady:function(){var b=this,c='<div class="field"><input type="checkbox" class="checkbox" id="vat-checkbox" value="Y" /><label for="vat-checkbox" class="checklabel">Add VAT on top?</label></div>',d=a("#vat"),e=a("#vat-checkbox"),f=a("#price");0!==d.length&&(d.parent().before(c),0===d.val().length&&d.parent().hide(),e.click(function(){e.attr("checked")===!0?(d.parent().show(),b.calculateVAT()):(d.val(),d.parent().hide())}),f.keyup(function(){e.attr("checked")===!0&&calculateVAT()}))},calculateTax:function(){var b=a("#vat_rate").val(),c=a("#price").val(),d=c*(b/100);a("#vat").val(d)}}}(jQuery),$(document).ready(function(){beancounterTax.onReady()});